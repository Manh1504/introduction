<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Code with Me</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<header>
    <div class="header">
        <div class="logo">
            <img src="https://www.w3schools.com/howto/img_avatar.png" alt="Avatar" width="80" height="80">
            <h1>CodeWithMe</h1>
        </div>
        <div class="menu">
            <a>Trang chủ</a>
            <a href="#">Người đóng góp</a>
            <a href="#">Giỏ hàng</a>
            <span id="userArea">
            <a href="đăng nhập.html" id="loginLink">Đăng nhập</a>
            <a href="đăng ký.html" id="registerLink">Đăng ký</a>
            </span>


        </div>
    </div>
</header>
<main>
    <div class="categories">
        <a href="#" class="ative">Tất cả khóa học</a>
        <a href="#">Lập trình cơ sở</a>
        <a href="#">Thuật toán</a>
        <a href="#">Kiến thức chuyên sâu</a>
    </div>

    <!-- List of courses -->
    <div class="courses">
        <!-- Course 1 -->
        <div class="course-card">
            <h3>Khóa học Lập trình C cơ bản</h3>
             <img onclick="moModal()" src="https://d3hi6wehcrq5by.cloudfront.net/itnavi-blog/2020/06/Ng%C3%B4n-ng%E1%BB%AF-l%E1%BA%ADp-tr%C3%ACnh-C-5.jpg"  alt="Ngôn ngữ lập trình C" width="250" height="150">
                <div id="modalContainer" class="modal-overlay"></div>
                <script>
                    function moModal() {
                      fetch('html/NgonnguC.html')
                        .then(response => response.text())
                        .then(data => {
                          const modalContainer = document.getElementById('modalContainer');
                  
                          // Tạo element tạm để parse HTML
                          const temp = document.createElement('div');
                          temp.innerHTML = data;
                  
                          // Lấy tất cả các script
                          const scripts = temp.querySelectorAll('script');
                  
                          // Chèn nội dung vào modal
                          modalContainer.innerHTML = temp.innerHTML;
                  
                          // Gắn từng script lại vào DOM để chúng được thực thi
                          scripts.forEach(oldScript => {
                            const newScript = document.createElement('script');
                            if (oldScript.src) {
                              newScript.src = oldScript.src;
                            } else {
                              newScript.textContent = oldScript.textContent;
                            }
                            document.body.appendChild(newScript);
                          });
                  
                          modalContainer.style.display = 'flex';
                        });
                    }
                  
                    function dongModal() {
                      document.getElementById('modalContainer').style.display = 'none';
                    }
                     // dí ra ngoài thì thoát
                    window.onclick = function(event) {
                      const modalContainer = document.getElementById('modalContainer');
                      if (event.target == modalContainer) {
                        dongModal();
                      }
                    }
                  </script>
                  
            <p>Khóa học này sẽ giúp bạn nắm vững các khái niệm cơ bản về lập trình C, từ các cấu trúc điều khiển đến việc quản lý bộ nhớ.</p>
            <button>Thêm vào giỏ hàng</button>
        </div>
        <!-- Course 2 -->
        <div class="course-card">
            <h3>Khóa học JavaScript cơ bản</h3>
            <p>Khóa học giới thiệu các khái niệm cơ bản của JavaScript, giúp bạn xây dựng các ứng dụng web động và tương tác với người dùng.</p>
            <button>Thêm vào giỏ hàng</button>
        </div>
        <!-- Course 3 -->
        <div class="course-card">
            <h3>Khóa học Python cơ bản</h3>
            <p>Khóa học này cung cấp các khái niệm cơ bản về Python, lý tưởng cho những người mới bắt đầu học lập trình.</p>
            <button>Thêm vào giỏ hàng</button>
        </div>
        <!-- Course 4 -->
        <div class="course-card">
            <h3>Khóa học HTML & CSS</h3>
            <p>Khóa học này sẽ dạy bạn cách tạo các trang web đẹp mắt bằng HTML và CSS, từ cơ bản đến nâng cao.</p>
            <button>Thêm vào giỏ hàng</button>
        </div>
        <!-- Course 5 -->
        <div class="course-card">
            <h3>Khóa học Thuật toán cơ bản</h3>
            <p>Khóa học giúp bạn hiểu rõ về các thuật toán cơ bản như tìm kiếm, sắp xếp và các kỹ thuật tối ưu hóa trong lập trình.</p>
            <button>Thêm vào giỏ hàng</button>
        </div>
        <!-- Course 6 -->
        <div class="course-card">
            <h3>Khóa học C++ nâng cao</h3>
            <p>Khóa học này đào sâu vào các khái niệm nâng cao trong C++, giúp bạn viết mã hiệu quả và tối ưu hóa ứng dụng.</p>
            <button>Thêm vào giỏ hàng</button>
        </div>
        <!-- Course 7 -->
        <div class="course-card">
            <h3>Khóa học ReactJS</h3>
            <p>Khóa học ReactJS giúp bạn xây dựng ứng dụng web động và tối ưu hiệu suất với thư viện React.</p>
            <button>Thêm vào giỏ hàng</button>
        </div>
        <!-- Course 8 -->
        <div class="course-card">
            <h3>Khóa học Node.js</h3>
            <p>Khóa học giới thiệu Node.js, một nền tảng phát triển ứng dụng web server-side với JavaScript.</p>
            <button>Thêm vào giỏ hàng</button>
        </div>
        <!-- Course 9 -->
        <div class="course-card">
            <h3>Khóa học Machine Learning</h3>
            <p>Khóa học này sẽ giúp bạn hiểu rõ về các thuật toán học máy, từ phân loại đến học sâu.</p>
            <button>Thêm vào giỏ hàng</button>
        </div>
        <!-- Course 10 -->
        <div class="course-card">
            <h3>Khóa học Web Scraping với Python</h3>
            <p>Khóa học này giúp bạn thu thập dữ liệu từ các trang web và xử lý dữ liệu bằng Python.</p>
            <button>Thêm vào giỏ hàng</button>
        </div>
        <!-- Course 11 -->
        <div class="course-card">
           <h3>Khóa học Docker cơ bản</h3>
                <img onclick="moModalDocker()"
                    src="https://ayeshalshukri.co.uk/category/guides/docker-error-failed-to-solve-with-frontend-dockerfile/DockerDeployment.png" alt="Docker Course"
                    width="300" height="150">
                <div id="modalContainerDocker" class="modal-overlay"></div>
                <script>
                    function moModalDocker() {
                        fetch('html/Docker.html')
                            .then(response => response.text())
                            .then(data => {
                                const modalContainer = document.getElementById('modalContainerDocker');
                                const temp = document.createElement('div');
                                temp.innerHTML = data;
                                const scripts = temp.querySelectorAll('script');
                                modalContainer.innerHTML = temp.innerHTML;

                                scripts.forEach(oldScript => {
                                    const newScript = document.createElement('script');
                                    if (oldScript.src) {
                                        newScript.src = oldScript.src;
                                    } else {
                                        newScript.textContent = oldScript.textContent;
                                    }
                                    document.body.appendChild(newScript);
                                });

                                modalContainer.style.display = 'flex';
                            });
                    }

                    function dongModalDocker() {
                        document.getElementById('modalContainerDocker').style.display = 'none';
                    }
                    window.onclick = function (event) {
                        const modalContainer = document.getElementById('modalContainerDocker');
                        if (event.target == modalContainer) {
                            dongModalDocker();
                        }
                    }
                </script>
            
                <p>Khóa học này giới thiệu Docker, công cụ giúp bạn xây dựng và triển khai ứng dụng dễ dàng và nhanh chóng.</p>
                <button>Thêm vào giỏ hàng</button>
        </div>
        <!-- Course 12 -->
        <div class="course-card">
            <h3>Khóa học Dữ liệu lớn với Hadoop</h3>
            <p>Khóa học này dạy bạn cách xử lý và phân tích dữ liệu lớn sử dụng Hadoop, một trong những công cụ phổ biến nhất hiện nay.</p>
            <button>Thêm vào giỏ hàng</button>
        </div>
    </div>
</main>
<footer>
    <p>&copy; 2025 CodeWithMe. All rights reserved.</p>
</footer>
    <script>
    const isLoggedIn = localStorage.getItem("isLoggedIn");
const currentUser = localStorage.getItem("currentUser");

if (isLoggedIn === "true" && currentUser) {
    const userArea = document.getElementById("userArea");
    
    userArea.innerHTML = `
        <div class="account">
            <div class="profile">
                <img src="https://png.pngtree.com/png-vector/20191009/ourmid/pngtree-user-icon-png-image_1796659.jpg" alt="" >
            </div>
            <div class="menu1">
                <ul>
                    <li>
                        <i class="fa-solid fa-book"></i>
                        <a href="#">Lịch sử mua hàng</a>
                    </li>
                    <li>
                        <i class="fa-solid fa-calendar-days"></i>
                        <a href="#">Lớp của tôi</a>
                    </li>
                    <li>
                        <i class="fa-solid fa-right-from-bracket"></i>
                        <a href="#" id="logoutLink">Thoát</a>
                    </li>
                </ul>
            </div>
        </div>
    `;
    
    // Thêm CSS cho khu vực người dùng
    const style = document.createElement('style');
    style.textContent = `
        #userArea {
            margin-left: 10px;
        }
        .account {
            
            position: relative;
            top: 20px;
        }
        
        .profile {
            position: absolute;
            top: 0;
            right: 30px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            cursor: pointer;
            
        }
        
        .profile img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .menu1 {
            position: absolute;
            width: 260px;
            background-color: white;
            top: 75px;
            right: 15px;
            border-radius: 20px;
            visibility: hidden;
            opacity: 0;
            transition: 0.3s;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        
        .menu1.active {
            visibility: visible;
            opacity: 1;
        }
        
        .menu1::before {
            content: "";
            background-color: white;
            width: 15px;
            height: 15px;
            position: absolute;
            top: -8px;
            right: 35px;
            transform: rotate(45deg);
        }
        
        .menu1 ul {
            margin-top: 20px;
            margin-bottom: 20px;
            padding: 0;
            list-style-type: none;
        }
        
        .menu1 ul li {
            padding: 15px 20px;
            border-bottom: 1px solid #ddd;
            background: #fff;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .menu1 ul li:last-child {
            border-bottom: none;
        }
        
        .menu1 ul li:hover {
            background: #e7e7e7;
        }
        
        .menu1 ul li i {
            color: #b4b4b4;
            font-size: 1.1rem;
            transition: all 0.5s ease;
        }
        
        .menu1 ul li:hover i {
            color: #333;
        }
        
        .menu1 ul li a {
            font-size: 1.1rem;
            color: #292929;
            margin-left: 20px;
            text-decoration: none;
        }
    `;
    document.head.appendChild(style);
    
    // Xử lý sự kiện đăng xuất
    document.getElementById("logoutLink").addEventListener("click", function (e) {
        e.preventDefault();
        localStorage.removeItem("isLoggedIn");
        localStorage.removeItem("currentUser");
        location.reload(); // Tải lại trang để quay về giao diện chưa đăng nhập
    });
    
    // Xử lý hiển thị/ẩn menu khi nhấp vào ảnh hồ sơ
    const profileElement = document.querySelector('.profile');
    const menuElement = document.querySelector('.menu1');
    
    profileElement.addEventListener('click', function(e) {
        e.stopPropagation();
        menuElement.classList.toggle('active');
    });
    
    // Đóng menu khi nhấp vào bất kỳ đâu bên ngoài
    document.addEventListener('click', function(event) {
        if (!event.target.closest('.profile') && !event.target.closest('.menu1')) {
            menuElement.classList.remove('active');
        }
    });
}
</script>
</body>
</html>
